<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1280 720" preserveAspectRatio="xMidYMid meet">
  <defs>
    <style>
      text { font-family: 'Noto Sans JP', sans-serif; fill: #1a1a1a; }
      .title { font-weight: 700; }
      .section-title { font-weight: 700; }
      .step-title { font-weight: 600; }
      .main-box { fill: #e3f2fd; stroke: #1976d2; stroke-width: 3; rx: 8; }
      .step-box { fill: #ffffff; stroke: #42a5f5; stroke-width: 2; rx: 6; }
      .why-box { fill: #fff3e0; stroke: #ff6f00; stroke-width: 3; rx: 8; }
      .effect-box { fill: #e8f5e9; stroke: #388e3c; stroke-width: 3; rx: 8; }
      .highlight-blue { fill: #1976d2; }
      .highlight-orange { fill: #ff6f00; }
      .highlight-green { fill: #388e3c; }
    </style>
  </defs>

  <!-- Title -->
  <text x="640" y="45" class="title" font-size="26" text-anchor="middle">STEP2のまとめ</text>

  <!-- Left Column: 7 Steps -->
  <g transform="translate(30, 85)">
    <text x="305" y="0" class="section-title highlight-blue" font-size="19" text-anchor="middle">📋 設計の7ステップ</text>
    <rect x="0" y="10" width="610" height="585" class="main-box"/>

    <!-- Step 1 -->
    <rect x="15" y="25" width="580" height="80" class="step-box"/>
    <text x="305" y="48" class="step-title" font-size="16" text-anchor="middle">STEP2-1: Tech Stack Setup</text>
    <text x="30" y="76" font-size="13">• 最初に固める(後から変更は大変)</text>
    <text x="30" y="99" font-size="13">• 選定理由も明記(技術判断の根拠)</text>

    <!-- Step 2 -->
    <rect x="15" y="113" width="580" height="80" class="step-box"/>
    <text x="305" y="136" class="step-title" font-size="16" text-anchor="middle">STEP2-2: システムアーキテクチャ</text>
    <text x="30" y="164" font-size="13">• Mermaid/SVG図で可視化</text>
    <text x="30" y="187" font-size="13">• 3層構造(UI・ビジネスロジック・データ)</text>

    <!-- Step 3 -->
    <rect x="15" y="201" width="580" height="80" class="step-box"/>
    <text x="305" y="224" class="step-title" font-size="16" text-anchor="middle">STEP2-3: データベーススキーマ設計</text>
    <text x="30" y="252" font-size="13">• ER図作成 / • 正規化</text>
    <text x="30" y="275" font-size="13">• インデックス設計</text>

    <!-- Step 4 -->
    <rect x="15" y="289" width="580" height="102" class="step-box"/>
    <text x="305" y="312" class="step-title" font-size="16" text-anchor="middle">STEP2-4: API仕様定義</text>
    <text x="30" y="340" font-size="13">• エンドポイント / • パラメータ</text>
    <text x="30" y="363" font-size="13">• レスポンス形式</text>
    <text x="30" y="386" font-size="13">• エラーハンドリング</text>

    <!-- Step 5 -->
    <rect x="15" y="399" width="580" height="80" class="step-box"/>
    <text x="305" y="422" class="step-title" font-size="16" text-anchor="middle">STEP2-5: 受入条件詳細化</text>
    <text x="30" y="450" font-size="13">• Given-When-Then形式</text>
    <text x="30" y="473" font-size="13">• 具体的な値で明示</text>

    <!-- Step 6 -->
    <rect x="15" y="487" width="580" height="80" class="step-box"/>
    <text x="305" y="510" class="step-title" font-size="16" text-anchor="middle">STEP2-6: セキュリティ設計</text>
    <text x="30" y="538" font-size="13">• 認証・認可 / • 入力検証</text>
    <text x="30" y="561" font-size="13">• 環境変数管理</text>

    <!-- Step 7 -->
    <rect x="15" y="575" width="580" height="80" class="step-box"/>
    <text x="305" y="598" class="step-title" font-size="16" text-anchor="middle">STEP2-7: docs/spec.md 作成</text>
    <text x="30" y="626" font-size="13">• 全てを集約</text>
    <text x="30" y="649" font-size="13">• AIが参照する設計書</text>
  </g>

  <!-- Right Column Top: Why This Order -->
  <g transform="translate(670, 85)">
    <text x="290" y="0" class="section-title highlight-orange" font-size="19" text-anchor="middle">🎯 なぜこの順序か</text>
    <rect x="0" y="10" width="580" height="200" class="why-box"/>

    <text x="290" y="38" class="step-title" font-size="16" text-anchor="middle">技術スタック確定 → 全体構造</text>
    <text x="290" y="71" class="step-title" font-size="16" text-anchor="middle">→ 詳細設計</text>
    <text x="1000" y="100" font-size="13">• 大きな決定から小さな決定へ</text>
    <text x="1000" y="128" font-size="13">• 手戻りを最小化</text>
    <text x="1000" y="156" font-size="13">• AIが迷わない設計図</text>

    <text x="290" y="185" class="step-title" font-size="16" text-anchor="middle">設計書 = AIのGuardrails</text>
  </g>

  <!-- Right Column Guardrails Text -->
  <g transform="translate(670, 275)">
    <rect x="0" y="0" width="580" height="60" class="why-box"/>
    <text x="1000" y="32" font-size="13">• AIは設計書に従って実装</text>
  </g>

  <!-- Right Column Middle: Additional Detail -->
  <g transform="translate(670, 345)">
    <rect x="0" y="0" width="580" height="60" class="why-box"/>
    <text x="1000" y="32" font-size="13">• 一貫性のある構造</text>
  </g>

  <!-- Right Column: More Detail -->
  <g transform="translate(670, 415)">
    <rect x="0" y="0" width="580" height="60" class="main-box"/>
    <text x="1000" y="32" font-size="13">• セキュリティ・品質を担保</text>
  </g>

  <!-- Right Column: AI Instruction -->
  <g transform="translate(670, 485)">
    <text x="290" y="0" class="section-title highlight-blue" font-size="19" text-anchor="middle">💡 AIへの指示</text>
    <rect x="0" y="10" width="580" height="75" class="main-box"/>

    <rect x="20" y="23" width="540" height="55" fill="#ffffff" stroke="#1976d2" stroke-width="2" rx="4"/>
    <text x="290" y="47" font-size="13" text-anchor="middle" font-family="monospace">「docs/spec.md に厳密に従って</text>
    <text x="290" y="72" font-size="13" text-anchor="middle" font-family="monospace">実装してください」</text>
  </g>

  <!-- Right Column Bottom: Effect -->
  <g transform="translate(670, 575)">
    <text x="290" y="0" class="section-title highlight-green" font-size="19" text-anchor="middle">📊 効果</text>
    <rect x="0" y="10" width="580" height="110" class="effect-box"/>

    <text x="1000" y="37" font-size="13">✅ AIが一貫性のある実装</text>
    <text x="1000" y="62" font-size="13">✅ 手戻りなし</text>
    <text x="1000" y="87" font-size="13">✅ セキュリティ・品質担保</text>
    <text x="1000" y="112" font-size="13">✅ 全員が同じ設計書を参照</text>
  </g>

  <!-- Bottom Summary -->
  <rect x="30" y="685" width="1220" height="30" fill="#fff3e0" stroke="#ff6f00" stroke-width="3" rx="6"/>
  <text x="640" y="704" font-size="11" text-anchor="middle" font-weight="600">設計書は「AIの作業指示書」であり「Guardrails(ガードレール)」→ AIが勝手な実装をできなくなる</text>
</svg>
