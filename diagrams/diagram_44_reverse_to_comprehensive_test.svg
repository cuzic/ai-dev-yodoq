<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 800">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#333" />
    </marker>
    <marker id="arrowhead-red" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#e74c3c" />
    </marker>
    <marker id="arrowhead-green" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#27ae60" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="700" y="40" font-size="28" font-weight="bold" text-anchor="middle" fill="#2c3e50">
    リバースエンジニアリング → 網羅的テスト生成
  </text>

  <!-- Left side: Traditional approach (Bad) -->
  <g id="traditional-approach">
    <rect x="50" y="80" width="600" height="650" fill="#fee" stroke="#e74c3c" stroke-width="3" rx="10"/>

    <text x="350" y="120" font-size="24" font-weight="bold" text-anchor="middle" fill="#e74c3c">
      ❌ 従来のアプローチ（コード追認のみ）
    </text>

    <!-- Existing Code -->
    <rect x="100" y="160" width="500" height="120" fill="#fff" stroke="#e74c3c" stroke-width="2" rx="5"/>
    <text x="350" y="195" font-size="20" font-weight="bold" text-anchor="middle" fill="#333">既存コード</text>
    <text x="120" y="235" font-size="18" fill="#555">• 実装されている機能のみ</text>
    <text x="120" y="260" font-size="18" fill="#555">• バグも含まれている</text>

    <!-- Arrow -->
    <line x1="350" y1="290" x2="350" y2="330" stroke="#e74c3c" stroke-width="3" marker-end="url(#arrowhead-red)"/>
    <text x="380" y="315" font-size="18" fill="#e74c3c">直接生成</text>

    <!-- Test from Code -->
    <rect x="100" y="340" width="500" height="150" fill="#fff" stroke="#e74c3c" stroke-width="2" rx="5"/>
    <text x="350" y="380" font-size="20" font-weight="bold" text-anchor="middle" fill="#333">テストシナリオ（不完全）</text>
    <text x="120" y="415" font-size="18" fill="#555">• 実装済み機能のみカバー</text>
    <text x="120" y="440" font-size="18" fill="#555">• エッジケースの見落とし</text>
    <text x="120" y="465" font-size="18" fill="#555">• バグもテストで追認</text>

    <!-- Arrow -->
    <line x1="350" y1="500" x2="350" y2="540" stroke="#e74c3c" stroke-width="3" marker-end="url(#arrowhead-red)"/>

    <!-- Result -->
    <rect x="100" y="550" width="500" height="150" fill="#fdd" stroke="#e74c3c" stroke-width="2" rx="5"/>
    <text x="350" y="585" font-size="20" font-weight="bold" text-anchor="middle" fill="#c0392b">❌ 結果：不完全なテスト</text>
    <text x="120" y="620" font-size="18" fill="#555">• 既存バグを見逃す</text>
    <text x="120" y="645" font-size="18" fill="#555">• 仕様外の動作を検出できない</text>
    <text x="120" y="670" font-size="18" fill="#555">• 本来あるべきテストが欠落</text>
  </g>

  <!-- Right side: Reverse Engineering approach (Good) -->
  <g id="reverse-engineering-approach">
    <rect x="750" y="80" width="600" height="650" fill="#efe" stroke="#27ae60" stroke-width="3" rx="10"/>

    <text x="1050" y="120" font-size="24" font-weight="bold" text-anchor="middle" fill="#27ae60">
      ✅ リバースエンジニアリング（仕様逆生成）
    </text>

    <!-- Existing Code -->
    <rect x="800" y="160" width="500" height="80" fill="#fff" stroke="#27ae60" stroke-width="2" rx="5"/>
    <text x="1050" y="195" font-size="20" font-weight="bold" text-anchor="middle" fill="#333">既存コード</text>
    <text x="820" y="218" font-size="18" fill="#555">• 実装されている機能</text>

    <!-- Arrow -->
    <line x1="1050" y1="250" x2="1050" y2="280" stroke="#27ae60" stroke-width="3" marker-end="url(#arrowhead-green)"/>
    <text x="1080" y="270" font-size="18" fill="#27ae60">AI逆生成</text>

    <!-- Requirements & User Stories -->
    <rect x="800" y="290" width="500" height="120" fill="#fff" stroke="#27ae60" stroke-width="2" rx="5"/>
    <text x="1050" y="325" font-size="20" font-weight="bold" text-anchor="middle" fill="#333">要件定義書・ユーザーストーリー</text>
    <text x="820" y="363" font-size="18" fill="#555">• 機能の意図を理解</text>
    <text x="820" y="388" font-size="18" fill="#555">• あるべき仕様を明確化</text>

    <!-- Arrow -->
    <line x1="1050" y1="420" x2="1050" y2="460" stroke="#27ae60" stroke-width="3" marker-end="url(#arrowhead-green)"/>
    <text x="1080" y="448" font-size="18" fill="#27ae60">仕様ベース</text>

    <!-- Comprehensive Test Scenarios -->
    <rect x="800" y="470" width="500" height="150" fill="#fff" stroke="#27ae60" stroke-width="2" rx="5"/>
    <text x="1050" y="505" font-size="20" font-weight="bold" text-anchor="middle" fill="#333">網羅的テストシナリオ</text>
    <text x="820" y="540" font-size="18" fill="#555">• 正常系・異常系・境界値すべて</text>
    <text x="820" y="565" font-size="18" fill="#555">• 未実装のエッジケースも検出</text>
    <text x="820" y="590" font-size="18" fill="#555">• 仕様外の動作を発見</text>

    <!-- Arrow -->
    <line x1="1050" y1="630" x2="1050" y2="660" stroke="#27ae60" stroke-width="3" marker-end="url(#arrowhead-green)"/>

    <!-- Result -->
    <rect x="800" y="670" width="500" height="50" fill="#dfd" stroke="#27ae60" stroke-width="2" rx="5"/>
    <text x="1050" y="702" font-size="20" font-weight="bold" text-anchor="middle" fill="#27ae60">
      ✅ あるべきテストの網羅的実施
    </text>
  </g>

  <!-- Bottom note -->
  <rect x="100" y="750" width="1250" height="40" fill="#e8f4f8" stroke="#3498db" stroke-width="2" rx="5"/>
  <text x="725" y="775" font-size="18" font-weight="bold" text-anchor="middle" fill="#2980b9">
    💡 仕様を逆生成することで、コードの追認ではなく「あるべき姿」に基づいたテストが可能に
  </text>
</svg>
