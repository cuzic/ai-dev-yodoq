<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1040 910">
  <defs>
    <style>
      .title { font-family: 'Noto Sans JP', sans-serif; font-size: 81px; font-weight: bold; fill: #333333; }
      .layer-title { font-family: 'Noto Sans JP', sans-serif; font-size: 72px; font-weight: bold; fill: white; }
      .layer-text { font-family: 'Noto Sans JP', sans-serif; font-size: 60px; fill: white; }
    </style>
  </defs>

  <!-- Background -->
  <rect width="800" height="700" fill="#FFFFFF"/>

  <!-- Title -->
  <text x="400" y="35" class="title" text-anchor="middle">デグレ防止の3層構造（テストピラミッド）</text>

  <!-- Layer 1: E2E Tests (Top - Smallest) -->
  <path d="M 400 100 L 500 200 L 300 200 Z" fill="#00146E"/>
  <text x="400" y="140" class="layer-title" text-anchor="middle">E2Eテスト</text>
  <text x="400" y="165" class="layer-text" text-anchor="middle" font-size="24">実行時間: 長い</text>
  <text x="400" y="185" class="layer-text" text-anchor="middle" font-size="24">数: 少ない</text>

  <!-- Layer 2: Integration Tests (Middle) -->
  <path d="M 500 200 L 600 350 L 200 350 L 300 200 Z" fill="#00AFF0"/>
  <text x="400" y="250" class="layer-title" text-anchor="middle">統合テスト</text>
  <text x="400" y="275" class="layer-text" text-anchor="middle" font-size="24">実行時間: 中程度</text>
  <text x="400" y="295" class="layer-text" text-anchor="middle" font-size="24">数: 中程度</text>
  <text x="400" y="320" class="layer-text" text-anchor="middle" font-size="24">API単位の動作確認</text>

  <!-- Layer 3: Unit Tests (Bottom - Largest) -->
  <path d="M 600 350 L 700 500 L 100 500 L 200 350 Z" fill="#66D9FF"/>
  <text x="400" y="400" class="layer-title" text-anchor="middle">単体テスト</text>
  <text x="400" y="425" class="layer-text" text-anchor="middle" font-size="24">実行時間: 速い</text>
  <text x="400" y="445" class="layer-text" text-anchor="middle" font-size="24">数: 多い</text>
  <text x="400" y="465" class="layer-text" text-anchor="middle" font-size="24">関数・メソッド単位</text>
  <text x="400" y="485" class="layer-text" text-anchor="middle" font-size="24">リファクタリング後必ず実行</text>

  <!-- Right side annotations -->
  <rect x="550" y="110" width="220" height="80" fill="#E6E6E6" stroke="#00146E" stroke-width="3" rx="5"/>
  <text x="660" y="135" style="font-family: 'Noto Sans JP', sans-serif; font-size: 64px; fill: #00146E; text-anchor: middle; font-weight: bold;">UIテスト</text>
  <text x="570" y="160" style="font-family: 'Noto Sans JP', sans-serif; font-size: 54px; fill: #333333;">• 画面操作フロー</text>
  <text x="570" y="177" style="font-family: 'Noto Sans JP', sans-serif; font-size: 54px; fill: #333333;">• 本番に近い環境</text>

  <rect x="550" y="220" width="220" height="110" fill="#E6E6E6" stroke="#00AFF0" stroke-width="3" rx="5"/>
  <text x="660" y="245" style="font-family: 'Noto Sans JP', sans-serif; font-size: 64px; fill: #00146E; text-anchor: middle; font-weight: bold;">API・DB連携</text>
  <text x="570" y="270" style="font-family: 'Noto Sans JP', sans-serif; font-size: 54px; fill: #333333;">• コンポーネント間連携</text>
  <text x="570" y="287" style="font-family: 'Noto Sans JP', sans-serif; font-size: 54px; fill: #333333;">• 実DB使用</text>
  <text x="570" y="304" style="font-family: 'Noto Sans JP', sans-serif; font-size: 54px; fill: #333333;">• ビジネスロジック</text>
  <text x="570" y="321" style="font-family: 'Noto Sans JP', sans-serif; font-size: 54px; fill: #333333;">　全体確認</text>

  <rect x="550" y="360" width="220" height="130" fill="#E6E6E6" stroke="#66D9FF" stroke-width="3" rx="5"/>
  <text x="660" y="385" style="font-family: 'Noto Sans JP', sans-serif; font-size: 64px; fill: #00146E; text-anchor: middle; font-weight: bold;">ロジック検証</text>
  <text x="570" y="410" style="font-family: 'Noto Sans JP', sans-serif; font-size: 54px; fill: #333333;">• 個別関数テスト</text>
  <text x="570" y="427" style="font-family: 'Noto Sans JP', sans-serif; font-size: 54px; fill: #333333;">• モック使用</text>
  <text x="570" y="444" style="font-family: 'Noto Sans JP', sans-serif; font-size: 54px; fill: #333333;">• 高速フィードバック</text>
  <text x="570" y="461" style="font-family: 'Noto Sans JP', sans-serif; font-size: 54px; fill: #333333;">• カバレッジ90%以上</text>
  <text x="570" y="478" style="font-family: 'Noto Sans JP', sans-serif; font-size: 54px; fill: #333333;">　目標</text>

  <!-- Left side annotations -->
  <rect x="30" y="110" width="220" height="80" fill="#E6E6E6" stroke="#00146E" stroke-width="3" rx="5"/>
  <text x="140" y="135" style="font-family: 'Noto Sans JP', sans-serif; font-size: 64px; fill: #00146E; text-anchor: middle; font-weight: bold;">実行頻度</text>
  <text x="50" y="160" style="font-family: 'Noto Sans JP', sans-serif; font-size: 54px; fill: #333333;">• リリース前</text>
  <text x="50" y="177" style="font-family: 'Noto Sans JP', sans-serif; font-size: 54px; fill: #333333;">• 重要機能の変更時</text>

  <rect x="30" y="220" width="220" height="110" fill="#E6E6E6" stroke="#00AFF0" stroke-width="3" rx="5"/>
  <text x="140" y="245" style="font-family: 'Noto Sans JP', sans-serif; font-size: 64px; fill: #00146E; text-anchor: middle; font-weight: bold;">実行頻度</text>
  <text x="50" y="270" style="font-family: 'Noto Sans JP', sans-serif; font-size: 54px; fill: #333333;">• 機能追加時</text>
  <text x="50" y="287" style="font-family: 'Noto Sans JP', sans-serif; font-size: 54px; fill: #333333;">• API変更時</text>
  <text x="50" y="304" style="font-family: 'Noto Sans JP', sans-serif; font-size: 54px; fill: #333333;">• 1日1回以上</text>

  <rect x="30" y="360" width="220" height="130" fill="#E6E6E6" stroke="#66D9FF" stroke-width="3" rx="5"/>
  <text x="140" y="385" style="font-family: 'Noto Sans JP', sans-serif; font-size: 64px; fill: #00146E; text-anchor: middle; font-weight: bold;">実行頻度</text>
  <text x="50" y="410" style="font-family: 'Noto Sans JP', sans-serif; font-size: 54px; fill: #333333;">• コミット毎</text>
  <text x="50" y="427" style="font-family: 'Noto Sans JP', sans-serif; font-size: 54px; fill: #333333;">• リファクタ後必須</text>
  <text x="50" y="444" style="font-family: 'Noto Sans JP', sans-serif; font-size: 54px; fill: #333333;">• CI/CD組み込み</text>
  <text x="50" y="461" style="font-family: 'Noto Sans JP', sans-serif; font-size: 54px; fill: #333333;">• 秒単位で結果確認</text>

  <!-- Bottom note -->
  <rect x="50" y="530" width="700" height="140" fill="#E6E6E6" stroke="#00146E" stroke-width="3" rx="10"/>
  <text x="400" y="560" style="font-family: 'Noto Sans JP', sans-serif; font-size: 74px; fill: #00146E; text-anchor: middle; font-weight: bold;">
    デグレ防止の黄金ルール
  </text>

  <text x="400" y="590" style="font-family: 'Noto Sans JP', sans-serif; font-size: 64px; fill: #333333; text-anchor: middle;">
    1. <tspan font-weight="bold">リファクタ後は必ず単体テスト全実行</tspan>
  </text>
  <text x="400" y="612" style="font-family: 'Noto Sans JP', sans-serif; font-size: 64px; fill: #333333; text-anchor: middle;">
    2. <tspan font-weight="bold">機能追加時は統合テスト実行</tspan>
  </text>
  <text x="400" y="634" style="font-family: 'Noto Sans JP', sans-serif; font-size: 64px; fill: #333333; text-anchor: middle;">
    3. <tspan font-weight="bold">リリース前はE2Eテスト実行</tspan>
  </text>

  <text x="400" y="660" style="font-family: 'Noto Sans JP', sans-serif; font-size: 60px; fill: #00146E; text-anchor: middle; font-weight: bold;">
    → AIにテストコード生成させて、自動実行で品質担保
  </text>
</svg>
